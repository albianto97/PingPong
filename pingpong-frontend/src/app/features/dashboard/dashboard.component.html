<div *ngIf="loading">Caricamento dati...</div>

<div *ngIf="!loading && user" class="dashboard">

  <!-- HERO -->
  <section class="hero">
    <h2>Ciao {{ user.username }} ðŸ‘‹</h2>
    <div class="hero-stats">
      <div>
        <span class="label">ELO</span>
        <span class="value">{{ user.eloRating }}</span>
      </div>
      <div *ngIf="rankingPosition !== null">
        <span class="label">Classifica</span>
        <span class="value">#{{ rankingPosition }}</span>
      </div>
    </div>
  </section>

  <!-- STATS -->
  <section class="card">
    <h3>Statistiche</h3>
    <div class="stats-grid">
      <div>
        <span class="num">{{ user.stats.matchesPlayed }}</span>
        <span class="text">Match</span>
      </div>
      <div>
        <span class="num">{{ user.stats.wins }}</span>
        <span class="text">Vittorie</span>
      </div>
      <div>
        <span class="num">{{ user.stats.losses }}</span>
        <span class="text">Sconfitte</span>
      </div>
    </div>
  </section>

  <!-- LAST MATCHES -->
  <section class="card">
    <h3>Ultimi match</h3>

    <div *ngIf="lastMatches.length === 0">
      Nessuna partita giocata
    </div>

    <ul class="matches">
      <li *ngFor="let match of lastMatches">
        <span>
          {{ match.players?.player1?.username }}
          vs
          {{ match.players?.player2?.username }}
        </span>

        <span
          class="badge"
          [class.win]="match.winner === user._id"
          [class.loss]="match.winner !== user._id"
        >
          {{ match.winner === user._id ? 'Vinto' : 'Perso' }}
        </span>
      </li>
    </ul>
  </section>

</div>
