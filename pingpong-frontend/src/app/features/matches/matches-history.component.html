<h2 class="page-title">Storico Match</h2>

<div class="history-container">

  <!-- TOP BAR -->
  <div class="history-toolbar">
    <span>Mostra:</span>
    <button
      *ngFor="let l of [5,10,20,50]"
      [class.active]="limit === l"
      (click)="changeLimit(l)">
      {{ l }}
    </button>
  </div>

  <!-- HEADER -->
  <div class="history-header">
    <div>Giocatore</div>
    <div>Risultato</div>
    <div>Giocatore</div>
  </div>

  <!-- ROWS -->
  <div
    *ngFor="let m of matches"
    class="history-row"
    (click)="toggle(m._id)"
  >
    <div class="player">
      {{ m.players.player1.username }}
    </div>

    <div class="result">
      {{ getResult(m) }}
    </div>

    <div class="player">
      {{ m.players.player2.username }}
    </div>

    <div
      *ngIf="expandedMatchId === m._id"
      class="sets-detail"
    >
      <div *ngFor="let s of m.sets; let i = index">
        Set {{ i + 1 }} → {{ s.player1Points }} - {{ s.player2Points }}
      </div>
      <small>{{ m.createdAt | date:'short' }}</small>
    </div>
  </div>

  <!-- PAGINATION -->
  <div class="history-pagination">
    <button (click)="prevPage()" [disabled]="page === 1">◀</button>
    <span>Pagina {{ page }} / {{ pages }}</span>
    <button (click)="nextPage()" [disabled]="page === pages">▶</button>
  </div>

</div>
