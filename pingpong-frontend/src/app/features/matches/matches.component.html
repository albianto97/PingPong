<h2>Inserisci Match</h2>

<section class="card">

  <!-- Avversario -->
  <div class="form-group">
    <label>Avversario</label>
    <select [(ngModel)]="opponentId">
      <option value="">Seleziona</option>
      <option *ngFor="let p of players" [value]="p.id">
        {{ p.username }}
      </option>
    </select>
  </div>

  <!-- CONFIG MATCH -->
  <div class="config-row">

    <!-- Numero set -->
    <div class="form-group">
      <label>Numero set</label>
      <select [(ngModel)]="maxSets" (change)="updateSets()">
        <option [value]="1">1 set</option>
        <option [value]="3">Best of 3</option>
      </select>
    </div>

    <!-- Punteggio set -->
    <div class="form-group">
      <label>Punteggio set</label>
      <select [(ngModel)]="maxPoints">
        <option [value]="11">A 11</option>
        <option [value]="21">A 21</option>
      </select>
    </div>

  </div>

  <p class="live-score">
    Set vinti: {{ getSetWins().p1 }} - {{ getSetWins().p2 }}
  </p>

  <!-- SET DINAMICI -->
  <div class="sets-container">
    <div *ngFor="let set of sets; let i = index" class="set-card">
      <h4>Set {{ i + 1 }}</h4>

      <div class="scores">
        <div>
          <label>Tu</label>
          <input type="number" [(ngModel)]="set.player1Points">
        </div>

        <div>
          <label>Avversario</label>
          <input type="number" [(ngModel)]="set.player2Points">
        </div>
      </div>
    </div>
  </div>

  <button *ngIf="canAddSet()" (click)="addSet()">
    + Aggiungi set
  </button>


  <button class="primary" (click)="submitMatch()">
    Salva match
  </button>

  <p class="message">{{ message }}</p>
</section>
