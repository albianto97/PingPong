<h2>Inserisci Match</h2>

<section class="card wide">

  <!-- Avversario -->
  <div class="form-group">
    <label>Avversario</label>
    <select [(ngModel)]="opponentId">
      <option value="">Seleziona</option>
      <option *ngFor="let p of players" [value]="p.id">
        {{ p.username }}
      </option>
    </select>
  </div>

  <!-- CONFIG MATCH -->
  <div class="config-row">

    <!-- Formato -->
    <div class="form-group">
      <label>Formato</label>
      <select [(ngModel)]="isBestOf3" (change)="updateMatchFormat()">
        <option [ngValue]="false">1 set</option>
        <option [ngValue]="true">Best of 3</option>
      </select>
    </div>

    <!-- Punteggio -->
    <div class="form-group">
      <label>Punteggio set</label>
      <select [(ngModel)]="maxPoints">
        <option [value]="11">A 11</option>
        <option [value]="21">A 21</option>
      </select>
    </div>

  </div>

  <!-- SCORE LIVE -->
  <p class="live-score">
    Set vinti: {{ getSetWins().p1 }} - {{ getSetWins().p2 }}
  </p>

  <!-- SET -->
  <div class="sets-container">
    <div *ngFor="let set of sets; let i = index" class="set-card">

      <h4>Set {{ i + 1 }}</h4>

      <div class="scores">
        <div>
          <label>Tu</label>
          <input
            type="number"
            [(ngModel)]="set.player1Points"
            (change)="checkThirdSet()"
          />
        </div>

        <div>
          <label>Avversario</label>
          <input
            type="number"
            [(ngModel)]="set.player2Points"
            (change)="checkThirdSet()"
          />
        </div>
      </div>

    </div>
  </div>

  <button class="primary" (click)="submitMatch()">
    Salva match
  </button>

  <p class="message">{{ message }}</p>
</section>
